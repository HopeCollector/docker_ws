// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/docker-existing-docker-compose
{
	// å®¹å™¨åœ¨ VS Code å·¦ä¸‹è§’æ˜¾ç¤ºçš„åç§°ï¼Œæ–¹ä¾¿åŒºåˆ†ä¸åŒç¯å¢ƒ
	"name": "ğŸ—½roaf3d",

	// æŒ‡å®š Docker Compose æ–‡ä»¶çš„è·¯å¾„ï¼Œæ”¯æŒæ•°ç»„ï¼ˆå¯ä»¥æœ‰å¤šä¸ª compose æ–‡ä»¶ï¼‰
	// è·¯å¾„æ˜¯ç›¸å¯¹äºå½“å‰ devcontainer.json æ–‡ä»¶çš„
	"dockerComposeFile": [
		"../../compose.yml"
	],

	// æŒ‡å®š VS Code åº”è¯¥è¿æ¥åˆ°å“ªä¸ªæœåŠ¡ï¼ˆå¯¹åº” compose.yml ä¸­çš„ service åç§°ï¼‰
	"service": "roaf3d",

	// æŒ‡å®šåœ¨å¯åŠ¨å¼€å‘å®¹å™¨æ—¶ï¼Œéœ€è¦ä¸€èµ·è¿è¡Œçš„æœåŠ¡åˆ—è¡¨
	// é€šå¸¸åŒ…å«ä¸»æœåŠ¡æœ¬èº«ï¼Œä¹Ÿå¯ä»¥åŒ…å«æ•°æ®åº“ç­‰ä¾èµ–æœåŠ¡
	"runServices": ["roaf3d"],

	// æŒ‡å®šå®¹å™¨å¯åŠ¨åï¼ŒVS Code æ‰“å¼€çš„é»˜è®¤å·¥ä½œç›®å½•
	// è¿™é‡Œå¯¹åº” compose.yml ä¸­æŒ‚è½½çš„ /ws ç›®å½•
	"workspaceFolder": "/ws",

	// VS Code ç›¸å…³çš„è‡ªå®šä¹‰é…ç½®
	"customizations": {
		"vscode": {
			// å®¹å™¨åˆ›å»ºæ—¶è‡ªåŠ¨å®‰è£…çš„ VS Code æ’ä»¶åˆ—è¡¨
			"extensions": [
				"redhat.vscode-yaml",           // YAML è¯­è¨€æ”¯æŒ
				"ms-python.black-formatter",    // Python Black æ ¼å¼åŒ–å·¥å…·
				"ms-toolsai.jupyter",           // Jupyter Notebook æ”¯æŒ
				"Gruntfuggly.todo-tree",        // TODO æ³¨é‡Šç®¡ç†
				"ms-python.python",             // Python è¯­è¨€æ”¯æŒ
				"ms-toolsai.datawrangler",      // æ•°æ®æ¸…æ´—å·¥å…·
				"llvm-vs-code-extensions.vscode-clangd", // C/C++ æ™ºèƒ½æç¤º (Clangd)
				"ms-vscode.cmake-tools",        // CMake å·¥å…·
				"tamasfe.even-better-toml"      // TOML è¯­è¨€æ”¯æŒ
			],
			// å®¹å™¨å†…çš„ VS Code ç‰¹å®šè®¾ç½®
			"settings": {
				// Clangd æ’ä»¶çš„é…ç½®å‚æ•°
				"clangd.arguments": [
					// åœ¨åå°è‡ªåŠ¨åˆ†ææ–‡ä»¶ï¼ˆåŸºäº compile_commands.jsonï¼‰
					"--background-index",
					// æŒ‡å®š compile_commands.json æ–‡ä»¶çš„ç›®å½•ä½ç½®
					// é€šå¸¸ CMake æ„å»ºä¼šåœ¨ build ç›®å½•ä¸‹ç”Ÿæˆæ­¤æ–‡ä»¶
					"--compile-commands-dir=build",
					// å¹¶å‘è§£æçš„ä»»åŠ¡æ•°é‡
					"-j=12",
					// å¯ç”¨ clang-tidy é™æ€åˆ†æ
					"--clang-tidy",
					// æŒ‡å®š clang-tidy æ£€æŸ¥è§„åˆ™
					"--clang-tidy-checks=performance-*,bugprone-*",
					// å¼€å¯å…¨å±€è¡¥å…¨ï¼ˆä¼šè‡ªåŠ¨è¡¥å……å¤´æ–‡ä»¶ï¼‰
					"--all-scopes-completion",
					// æ›´è¯¦ç»†çš„è¡¥å…¨ä¿¡æ¯
					"--completion-style=detailed",
					// è‡ªåŠ¨æ’å…¥å¤´æ–‡ä»¶çš„é£æ ¼
					"--header-insertion=iwyu",
					// é¢„ç¼–è¯‘å¤´æ–‡ä»¶å­˜å‚¨ä½ç½®
					"--pch-storage=disk"
				],
				// å½“é…ç½®æ”¹å˜æ—¶è‡ªåŠ¨é‡å¯ clangd æœåŠ¡
  				"clangd.onConfigChanged": "restart"
			}
		}
	}
}
